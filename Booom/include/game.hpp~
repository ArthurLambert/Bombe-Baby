//
// EPITECH PROJECT, 2018
// game.hpp
// File description:
// game header
//

#ifndef GAME_HPP_
#define GAME_HPP_

#include "main.hpp"
#include <vector>

#define MAP_SIZE 17*17

enum type_of_tile
{
	BLOCK,
	INDESTRUCTIBLE,
	PLAYER
};

enum bonus_type
{
	SPEED,
	SEED,
	WEED
};

enum direction
{
	UP,
	DOWN,
	LEFT,
	RIGHT
};

class Tile
{
public:
	Tile(type_of_tile type);
	~Tile() = default;
	type_of_tile get_type() const;

private:
	type_of_tile type;
};

class Block : public Tile
{
public :
	Block();
	~Block() = default;
	bonus_type getbonus() const;
	bool getis_destroyed() const;
	void destroy();

private:
	bonus_type bonus;
	bool is_destroyed;
};

class Map
{
public:
	Map(char* file);
	Map(); //test
	~Map() = default;
	vector< vector<Tile> > getmap() const;
	void setmap(vector< vector<Tile> > map);

private:
 vector< vector<Tile> > map;
};

class Player : public Tile
{
public:
	Player(vector<char> name, int* pos, Map map);
	~Player() = default;
	void move(direction dir, Map map, int* pos);
	void get_hit();
	void pick_bonus(Block bonus, Map map);
	int getpv() const;
	vector<char> getname() const;
	void drop_bombe(Map map, int* pos);

private:
	int pv;
	vector<char> name;
	int nb_bombe;
	int speed;
	int power;
	int pos[2];
};

class Bombe : public Tile
{
public:
	Bombe(Map map, int* pos);
	~Bombe() = default;
	void explode(Map map, int* pos);

private:
	int tictac;
	int power;
	int pos[2];
};

#endif
